{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-4a557ff0\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"üéØ Scan Ticket QR Code\", -1 /* HOISTED */));\nconst _hoisted_3 = {\n  class: \"decode-result\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"error\"\n};\nconst _hoisted_5 = {\n  key: 1\n};\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h4\", null, \"üéüÔ∏è Ticket Details\", -1 /* HOISTED */));\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"strong\", null, \"Event:\", -1 /* HOISTED */));\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"strong\", null, \"Reference:\", -1 /* HOISTED */));\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"strong\", null, \"Email:\", -1 /* HOISTED */));\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"strong\", null, \"Phone:\", -1 /* HOISTED */));\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, [/*#__PURE__*/_createElementVNode(\"strong\", null, \"Tickets:\")], -1 /* HOISTED */));\nconst _hoisted_12 = {\n  key: 2\n};\nconst _hoisted_13 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"text-danger\"\n}, \"‚ùå Ticket not found.\", -1 /* HOISTED */));\nconst _hoisted_14 = [_hoisted_13];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_qrcode_stream = _resolveComponent(\"qrcode-stream\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"p\", _hoisted_3, [_createTextVNode(\" Last result: \"), _createElementVNode(\"b\", null, _toDisplayString($setup.result), 1 /* TEXT */)]), _createVNode(_component_qrcode_stream, {\n    constraints: {\n      facingMode: 'environment'\n    },\n    onDetect: $setup.onDetect,\n    onError: $setup.onError\n  }, null, 8 /* PROPS */, [\"onDetect\", \"onError\"]), $setup.error ? (_openBlock(), _createElementBlock(\"p\", _hoisted_4, _toDisplayString($setup.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Show ticket info if found \"), $setup.ticket ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_hoisted_6, _createElementVNode(\"p\", null, [_hoisted_7, _createTextVNode(\" \" + _toDisplayString($setup.ticket.title), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_hoisted_8, _createTextVNode(\" \" + _toDisplayString($setup.ticket.reference), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_hoisted_9, _createTextVNode(\" \" + _toDisplayString($setup.ticket.contact?.email || 'N/A'), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_hoisted_10, _createTextVNode(\" \" + _toDisplayString($setup.ticket.contact?.phone || 'N/A'), 1 /* TEXT */)]), _hoisted_11, _createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.ticket.tickets, ticket => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: ticket._id\n    }, _toDisplayString(ticket.name) + \" x \" + _toDisplayString(ticket.quantity), 1 /* TEXT */);\n  }), 128 /* KEYED_FRAGMENT */))])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" If no ticket found \"), $setup.notFound ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, _hoisted_14)) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementVNode","_hoisted_13","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_toDisplayString","$setup","result","_createVNode","_component_qrcode_stream","constraints","facingMode","onDetect","onError","error","_hoisted_4","_createCommentVNode","ticket","_hoisted_5","_hoisted_6","_hoisted_7","title","_hoisted_8","reference","_hoisted_9","contact","email","_hoisted_10","phone","_hoisted_11","_Fragment","_renderList","tickets","key","_id","name","quantity","notFound","_hoisted_12","_hoisted_14"],"sources":["C:\\Users\\ajib\\OneDrive\\Desktop\\event-ticket\\event-ticket-frontend\\src\\components\\app\\admin\\scanner.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <h2>üéØ Scan Ticket QR Code</h2>\r\n\r\n    <p class=\"decode-result\">\r\n      Last result: <b>{{ result }}</b>\r\n    </p>\r\n\r\n    <qrcode-stream\r\n      :constraints=\"{ facingMode: 'environment' }\"\r\n      @detect=\"onDetect\"\r\n      @error=\"onError\"\r\n    />\r\n\r\n    <p v-if=\"error\" class=\"error\">{{ error }}</p>\r\n\r\n    <!-- Show ticket info if found -->\r\n    <div v-if=\"ticket\">\r\n      <h4>üéüÔ∏è Ticket Details</h4>\r\n      <p><strong>Event:</strong> {{ ticket.title }}</p>\r\n      <p><strong>Reference:</strong> {{ ticket.reference }}</p>\r\n      <p><strong>Email:</strong> {{ ticket.contact?.email || 'N/A' }}</p>\r\n      <p><strong>Phone:</strong> {{ ticket.contact?.phone || 'N/A' }}</p>\r\n      <p><strong>Tickets:</strong></p>\r\n      <ul>\r\n        <li v-for=\"ticket in ticket.tickets\" :key=\"ticket._id\">\r\n          {{ ticket.name }} x {{ ticket.quantity }}\r\n        </li>\r\n      </ul>\r\n    </div>\r\n\r\n    <!-- If no ticket found -->\r\n    <div v-if=\"notFound\">\r\n      <p class=\"text-danger\">‚ùå Ticket not found.</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue'\r\nimport { QrcodeStream } from 'vue-qrcode-reader'\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  components: {\r\n    QrcodeStream\r\n  },\r\n  setup() {\r\n    const result = ref('')\r\n    const ticket = ref(null)\r\n    const error = ref('')\r\n    const notFound = ref(false)\r\n\r\n    const onDetect = async (detectedCodes) => {\r\n      const reference = detectedCodes[0]?.rawValue\r\n      result.value = reference\r\n      ticket.value = null\r\n      notFound.value = false\r\n\r\n      try {\r\n        const res = await axios.get(`http://localhost:4000/api/order/${reference}`)\r\n        ticket.value = res.data.order\r\n      } catch (err) {\r\n        if (err.response && err.response.status === 404) {\r\n          notFound.value = true\r\n        } else {\r\n          error.value = 'Server error. Please try again.'\r\n        }\r\n        console.error(err)\r\n      }\r\n    }\r\n\r\n    const onError = (err) => {\r\n      console.error(err)\r\n      error.value = 'Camera access or scanning failed.'\r\n    }\r\n\r\n    return {\r\n      result,\r\n      ticket,\r\n      error,\r\n      notFound,\r\n      onDetect,\r\n      onError\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  max-width: 600px;\r\n  margin: 2rem auto;\r\n  text-align: center;\r\n}\r\n.decode-result {\r\n  margin-top: 1rem;\r\n  font-size: 1.2rem;\r\n}\r\n.error {\r\n  color: red;\r\n}\r\n</style>\r\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAW;gEACpBC,mBAAA,CAA+B,YAA3B,wBAAsB;;EAEvBD,KAAK,EAAC;AAAe;;;EAURA,KAAK,EAAC;;;;;gEAIpBC,mBAAA,CAA2B,YAAvB,oBAAkB;gEACnBA,mBAAA,CAAuB,gBAAf,QAAM;gEACdA,mBAAA,CAA2B,gBAAnB,YAAU;gEAClBA,mBAAA,CAAuB,gBAAf,QAAM;iEACdA,mBAAA,CAAuB,gBAAf,QAAM;iEACjBA,mBAAA,CAAgC,Y,aAA7BA,mBAAA,CAAyB,gBAAjB,UAAQ,E;;;;iEAUnBA,mBAAA,CAA8C;EAA3CD,KAAK,EAAC;AAAa,GAAC,qBAAmB;qBAA1CE,WAA8C,C;;;uBAhClDC,mBAAA,CAkCM,OAlCNC,UAkCM,GAjCJC,UAA+B,EAE/BJ,mBAAA,CAEI,KAFJK,UAEI,G,iBAFqB,gBACV,GAAAL,mBAAA,CAAmB,WAAAM,gBAAA,CAAbC,MAAA,CAAAC,MAAM,iB,GAG3BC,YAAA,CAIEC,wBAAA;IAHCC,WAAW,EAAE;MAAAC,UAAA;IAAA,CAA6B;IAC1CC,QAAM,EAAEN,MAAA,CAAAM,QAAQ;IAChBC,OAAK,EAAEP,MAAA,CAAAO;oDAGDP,MAAA,CAAAQ,KAAK,I,cAAdb,mBAAA,CAA6C,KAA7Cc,UAA6C,EAAAV,gBAAA,CAAZC,MAAA,CAAAQ,KAAK,oB,mCAEtCE,mBAAA,+BAAkC,EACvBV,MAAA,CAAAW,MAAM,I,cAAjBhB,mBAAA,CAYM,OAAAiB,UAAA,GAXJC,UAA2B,EAC3BpB,mBAAA,CAAiD,YAA9CqB,UAAuB,E,iBAAA,GAAC,GAAAf,gBAAA,CAAGC,MAAA,CAAAW,MAAM,CAACI,KAAK,iB,GAC1CtB,mBAAA,CAAyD,YAAtDuB,UAA2B,E,iBAAA,GAAC,GAAAjB,gBAAA,CAAGC,MAAA,CAAAW,MAAM,CAACM,SAAS,iB,GAClDxB,mBAAA,CAAmE,YAAhEyB,UAAuB,E,iBAAA,GAAC,GAAAnB,gBAAA,CAAGC,MAAA,CAAAW,MAAM,CAACQ,OAAO,EAAEC,KAAK,0B,GACnD3B,mBAAA,CAAmE,YAAhE4B,WAAuB,E,iBAAA,GAAC,GAAAtB,gBAAA,CAAGC,MAAA,CAAAW,MAAM,CAACQ,OAAO,EAAEG,KAAK,0B,GACnDC,WAAgC,EAChC9B,mBAAA,CAIK,c,kBAHHE,mBAAA,CAEK6B,SAAA,QAAAC,WAAA,CAFgBzB,MAAA,CAAAW,MAAM,CAACe,OAAO,EAAxBf,MAAM;yBAAjBhB,mBAAA,CAEK;MAFiCgC,GAAG,EAAEhB,MAAM,CAACiB;wBAC7CjB,MAAM,CAACkB,IAAI,IAAG,KAAG,GAAA9B,gBAAA,CAAGY,MAAM,CAACmB,QAAQ;2EAK5CpB,mBAAA,wBAA2B,EAChBV,MAAA,CAAA+B,QAAQ,I,cAAnBpC,mBAAA,CAEM,OAAAqC,WAAA,EAAAC,WAAA,K"},"metadata":{},"sourceType":"module","externalDependencies":[]}