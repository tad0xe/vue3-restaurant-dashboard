{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-4a557ff0\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"üéØ Scan Ticket QR Code\", -1 /* HOISTED */));\nconst _hoisted_3 = {\n  key: 0,\n  class: \"error\"\n};\nconst _hoisted_4 = {\n  class: \"decode-result\"\n};\nconst _hoisted_5 = {\n  key: 1,\n  class: \"text-start\",\n  style: {\n    \"border\": \"1px solid #ddd\",\n    \"border-radius\": \"8px\",\n    \"padding\": \"16px\",\n    \"background\": \"#f9f9f9\",\n    \"max-width\": \"600px\"\n  }\n};\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h4\", {\n  style: {\n    \"margin-bottom\": \"16px\"\n  }\n}, \"üéüÔ∏è Ticket Details\", -1 /* HOISTED */));\nconst _hoisted_7 = {\n  style: {\n    \"width\": \"120px\",\n    \"font-weight\": \"bold\"\n  }\n};\nconst _hoisted_8 = {\n  style: {\n    \"border-left\": \"1px solid #ccc\",\n    \"padding-left\": \"12px\"\n  }\n};\nconst _hoisted_9 = {\n  style: {\n    \"display\": \"flex\",\n    \"border-top\": \"1px solid #ddd\",\n    \"padding\": \"8px 0\"\n  }\n};\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  style: {\n    \"width\": \"120px\",\n    \"font-weight\": \"bold\"\n  }\n}, \"Tickets:\", -1 /* HOISTED */));\nconst _hoisted_11 = {\n  style: {\n    \"border-left\": \"1px solid #ccc\",\n    \"padding-left\": \"12px\"\n  }\n};\nconst _hoisted_12 = {\n  style: {\n    \"margin\": \"0\",\n    \"padding-left\": \"20px\"\n  }\n};\nconst _hoisted_13 = {\n  key: 2\n};\nconst _hoisted_14 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"text-danger\"\n}, \"‚ùå Ticket not found.\", -1 /* HOISTED */));\nconst _hoisted_15 = [_hoisted_14];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_qrcode_stream = _resolveComponent(\"qrcode-stream\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createVNode(_component_qrcode_stream, {\n    constraints: {\n      facingMode: 'environment'\n    },\n    onDetect: $options.onDetect,\n    onError: $options.onError\n  }, null, 8 /* PROPS */, [\"onDetect\", \"onError\"]), $data.error ? (_openBlock(), _createElementBlock(\"p\", _hoisted_3, _toDisplayString($data.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"p\", _hoisted_4, [_createTextVNode(\" Result: \"), _createElementVNode(\"b\", null, _toDisplayString($data.result), 1 /* TEXT */)]), $data.ticket ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_hoisted_6, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList({\n    'Event': $data.ticket.title,\n    'Reference': $data.ticket.reference,\n    'Email': $data.ticket.contact?.email || 'N/A',\n    'Phone': $data.ticket.contact?.phone || 'N/A'\n  }, (value, label) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      style: {\n        \"display\": \"flex\",\n        \"border-top\": \"1px solid #ddd\",\n        \"padding\": \"8px 0\"\n      },\n      key: label\n    }, [_createElementVNode(\"div\", _hoisted_7, _toDisplayString(label) + \":\", 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_8, _toDisplayString(value), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */)), _createCommentVNode(\" Tickets \"), _createElementVNode(\"div\", _hoisted_9, [_hoisted_10, _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"ul\", _hoisted_12, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.ticket.tickets, t => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: t._id\n    }, _toDisplayString(t.name) + \" x \" + _toDisplayString(t.quantity), 1 /* TEXT */);\n  }), 128 /* KEYED_FRAGMENT */))])])])])) : _createCommentVNode(\"v-if\", true), $data.notFound ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, _hoisted_15)) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementVNode","style","_hoisted_14","_createElementBlock","_hoisted_1","_hoisted_2","_createVNode","_component_qrcode_stream","constraints","facingMode","onDetect","$options","onError","$data","error","_hoisted_3","_toDisplayString","_hoisted_4","result","ticket","_hoisted_5","_hoisted_6","_Fragment","_renderList","title","reference","contact","email","phone","value","label","key","_hoisted_7","_hoisted_8","_createCommentVNode","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","tickets","t","_id","name","quantity","notFound","_hoisted_13","_hoisted_15"],"sources":["C:\\Users\\ajib\\OneDrive\\Desktop\\event-ticket\\event-ticket-frontend\\src\\components\\app\\admin\\scanner.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <h2>üéØ Scan Ticket QR Code</h2>\r\n\r\n  \r\n    <qrcode-stream\r\n      :constraints=\"{ facingMode: 'environment' }\"\r\n      @detect=\"onDetect\"\r\n      @error=\"onError\"\r\n    />\r\n\r\n    <p v-if=\"error\" class=\"error\">{{ error }}</p>\r\n      <p class=\"decode-result\">\r\n      Result: <b>{{ result }}</b>\r\n    </p>\r\n\r\n<div v-if=\"ticket\" class=\"text-start\" style=\"border: 1px solid #ddd; border-radius: 8px; padding: 16px; background: #f9f9f9; max-width: 600px;\">\r\n  <h4 style=\"margin-bottom: 16px;\">üéüÔ∏è Ticket Details</h4>\r\n\r\n  <div style=\"display: flex; border-top: 1px solid #ddd; padding: 8px 0;\" v-for=\"(value, label) in {\r\n      'Event': ticket.title,\r\n      'Reference': ticket.reference,\r\n      'Email': ticket.contact?.email || 'N/A',\r\n      'Phone': ticket.contact?.phone || 'N/A'\r\n    }\" :key=\"label\">\r\n    <div style=\"width: 120px; font-weight: bold;\">{{ label }}:</div>\r\n    <div style=\"border-left: 1px solid #ccc; padding-left: 12px;\">{{ value }}</div>\r\n  </div>\r\n\r\n  <!-- Tickets -->\r\n  <div style=\"display: flex; border-top: 1px solid #ddd; padding: 8px 0;\">\r\n    <div style=\"width: 120px; font-weight: bold;\">Tickets:</div>\r\n    <div style=\"border-left: 1px solid #ccc; padding-left: 12px;\">\r\n      <ul style=\"margin: 0; padding-left: 20px;\">\r\n        <li v-for=\"t in ticket.tickets\" :key=\"t._id\">\r\n          {{ t.name }} x {{ t.quantity }}\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n    <div v-if=\"notFound\">\r\n      <p class=\"text-danger\">‚ùå Ticket not found.</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { QrcodeStream } from 'vue-qrcode-reader'\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'QRScanner',\r\n  components: {\r\n    QrcodeStream\r\n  },\r\n  data() {\r\n    return {\r\n      result: '',\r\n      ticket: null,\r\n      error: '',\r\n      notFound: false\r\n    }\r\n  },\r\n  methods: {\r\n    async onDetect(detectedCodes) {\r\n      const reference = detectedCodes[0]?.rawValue\r\n      this.result = reference\r\n      this.ticket = null\r\n      this.notFound = false\r\n\r\n      try {\r\n        const res = await axios.get(`https://event-ticket-qa70.onrender.com/api/order/${reference}`)\r\n        this.ticket = res.data.order\r\n      } catch (err) {\r\n        if (err.response && err.response.status === 404) {\r\n          this.notFound = true\r\n        } else {\r\n          this.error = 'Server error. Please try again.'\r\n        }\r\n        console.error(err)\r\n      }\r\n    },\r\n    onError(err) {\r\n      console.error(err)\r\n      this.error = 'Camera access or scanning failed.'\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  max-width: 600px;\r\n  margin: 2rem auto;\r\n  text-align: center;\r\n}\r\n.decode-result {\r\n  margin-top: 1rem;\r\n  font-size: 1.2rem;\r\n}\r\n.error {\r\n  color: red;\r\n}\r\n</style>\r\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAW;gEACpBC,mBAAA,CAA+B,YAA3B,wBAAsB;;;EASVD,KAAK,EAAC;;;EACjBA,KAAK,EAAC;AAAe;;;EAIXA,KAAK,EAAC,YAAY;EAACE,KAAyG,EAAzG;IAAA;IAAA;IAAA;IAAA;IAAA;EAAA;;gEACpCD,mBAAA,CAAwD;EAApDC,KAA4B,EAA5B;IAAA;EAAA;AAA4B,GAAC,oBAAkB;;EAQ5CA,KAAwC,EAAxC;IAAA;IAAA;EAAA;AAAwC;;EACxCA,KAAwD,EAAxD;IAAA;IAAA;EAAA;AAAwD;;EAI1DA,KAAkE,EAAlE;IAAA;IAAA;IAAA;EAAA;AAAkE;iEACrED,mBAAA,CAA4D;EAAvDC,KAAwC,EAAxC;IAAA;IAAA;EAAA;AAAwC,GAAC,UAAQ;;EACjDA,KAAwD,EAAxD;IAAA;IAAA;EAAA;AAAwD;;EACvDA,KAAsC,EAAtC;IAAA;IAAA;EAAA;AAAsC;;;;iEAW1CD,mBAAA,CAA8C;EAA3CD,KAAK,EAAC;AAAa,GAAC,qBAAmB;qBAA1CG,WAA8C,C;;;uBA3ClDC,mBAAA,CA6CM,OA7CNC,UA6CM,GA5CJC,UAA+B,EAG/BC,YAAA,CAIEC,wBAAA;IAHCC,WAAW,EAAE;MAAAC,UAAA;IAAA,CAA6B;IAC1CC,QAAM,EAAEC,QAAA,CAAAD,QAAQ;IAChBE,OAAK,EAAED,QAAA,CAAAC;oDAGDC,KAAA,CAAAC,KAAK,I,cAAdX,mBAAA,CAA6C,KAA7CY,UAA6C,EAAAC,gBAAA,CAAZH,KAAA,CAAAC,KAAK,oB,mCACpCd,mBAAA,CAEE,KAFFiB,UAEE,G,iBAFuB,WACjB,GAAAjB,mBAAA,CAAmB,WAAAgB,gBAAA,CAAbH,KAAA,CAAAK,MAAM,iB,GAGfL,KAAA,CAAAM,MAAM,I,cAAjBhB,mBAAA,CAwBM,OAxBNiB,UAwBM,GAvBJC,UAAwD,G,kBAExDlB,mBAAA,CAQMmB,SAAA,QAAAC,WAAA;aAR6GV,KAAA,CAAAM,MAAM,CAACK,KAAK;iBAAsBX,KAAA,CAAAM,MAAM,CAACM,SAAS;aAAkBZ,KAAA,CAAAM,MAAM,CAACO,OAAO,EAAEC,KAAK;aAA2Bd,KAAA,CAAAM,MAAM,CAACO,OAAO,EAAEE,KAAK;MAA5KC,KAAK,EAAEC,KAAK;yBAA5F3B,mBAAA,CAQM;MARDF,KAAkE,EAAlE;QAAA;QAAA;QAAA;MAAA,CAAkE;MAKjE8B,GAAG,EAAED;QACT9B,mBAAA,CAAgE,OAAhEgC,UAAgE,EAAAhB,gBAAA,CAAfc,KAAK,IAAG,GAAC,iBAC1D9B,mBAAA,CAA+E,OAA/EiC,UAA+E,EAAAjB,gBAAA,CAAda,KAAK,iB;kCAGxEK,mBAAA,aAAgB,EAChBlC,mBAAA,CASM,OATNmC,UASM,GARJC,WAA4D,EAC5DpC,mBAAA,CAMM,OANNqC,WAMM,GALJrC,mBAAA,CAIK,MAJLsC,WAIK,I,kBAHHnC,mBAAA,CAEKmB,SAAA,QAAAC,WAAA,CAFWV,KAAA,CAAAM,MAAM,CAACoB,OAAO,EAAnBC,CAAC;yBAAZrC,mBAAA,CAEK;MAF4B4B,GAAG,EAAES,CAAC,CAACC;wBACnCD,CAAC,CAACE,IAAI,IAAG,KAAG,GAAA1B,gBAAA,CAAGwB,CAAC,CAACG,QAAQ;+EAQvB9B,KAAA,CAAA+B,QAAQ,I,cAAnBzC,mBAAA,CAEM,OAAA0C,WAAA,EAAAC,WAAA,K"},"metadata":{},"sourceType":"module","externalDependencies":[]}