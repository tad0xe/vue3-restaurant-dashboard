{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-e3bf31ca\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"Category Manager\", -1));\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\"\n}, \"Create Category\", -1));\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1));\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"All Categories\", -1));\nconst _hoisted_6 = {\n  key: 0\n};\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"strong\", null, \"Type:\", -1));\nconst _hoisted_8 = [\"src\"];\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = [\"onClick\"];\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = {\n  key: 1\n};\nconst _hoisted_14 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1));\nconst _hoisted_15 = {\n  key: 2\n};\nconst _hoisted_16 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"Edit Category\", -1));\nconst _hoisted_17 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\"\n}, \"Update\", -1));\nconst _hoisted_18 = {\n  key: 3\n};\nconst _hoisted_19 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"Single Category\", -1));\nconst _hoisted_20 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"strong\", null, \"Type:\", -1));\nconst _hoisted_21 = [\"src\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_spinner = _resolveComponent(\"spinner\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.createCategory && $options.createCategory(...args), [\"prevent\"])),\n    enctype: \"multipart/form-data\"\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.newCategory.type = $event),\n    placeholder: \"Category Type\",\n    required: \"\"\n  }, null, 512), [[_vModelText, $data.newCategory.type]]), _createElementVNode(\"input\", {\n    type: \"file\",\n    onChange: _cache[1] || (_cache[1] = (...args) => $options.handleFileChange && $options.handleFileChange(...args))\n  }, null, 32), _hoisted_3], 32), _hoisted_4, _hoisted_5, $data.categories.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.categories, cat => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: cat._id,\n      class: \"category-box\"\n    }, [_createElementVNode(\"p\", null, [_hoisted_7, _createTextVNode(\" \" + _toDisplayString(cat.type), 1)]), cat.photo ? (_openBlock(), _createElementBlock(\"img\", {\n      key: 0,\n      src: cat.photo,\n      width: \"150\"\n    }, null, 8, _hoisted_8)) : _createCommentVNode(\"\", true), _hoisted_9, _createElementVNode(\"button\", {\n      onClick: $event => $options.getCategory(cat._id)\n    }, \"View\", 8, _hoisted_10), _createElementVNode(\"button\", {\n      onClick: $event => $options.editCategory(cat)\n    }, \"Edit\", 8, _hoisted_11), _createElementVNode(\"button\", {\n      onClick: $event => $options.deleteCategory(cat._id)\n    }, \"Delete\", 8, _hoisted_12)]);\n  }), 128))])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_13, \"No categories found.\")), _hoisted_14, $data.editingCategory ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [_hoisted_16, _createElementVNode(\"form\", {\n    onSubmit: _cache[6] || (_cache[6] = _withModifiers((...args) => $options.updateCategory && $options.updateCategory(...args), [\"prevent\"])),\n    enctype: \"multipart/form-data\"\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.editingCategory.type = $event),\n    placeholder: \"Category Type\"\n  }, null, 512), [[_vModelText, $data.editingCategory.type]]), _createElementVNode(\"input\", {\n    type: \"file\",\n    onChange: _cache[4] || (_cache[4] = (...args) => $options.handleEditFileChange && $options.handleEditFileChange(...args))\n  }, null, 32), _hoisted_17, _createElementVNode(\"button\", {\n    type: \"button\",\n    onClick: _cache[5] || (_cache[5] = $event => $data.editingCategory = null)\n  }, \"Cancel\")], 32)])) : _createCommentVNode(\"\", true), $data.singleCategory ? (_openBlock(), _createElementBlock(\"div\", _hoisted_18, [_hoisted_19, _createElementVNode(\"p\", null, [_hoisted_20, _createTextVNode(\" \" + _toDisplayString($data.singleCategory.type), 1)]), _createElementVNode(\"img\", {\n    src: $data.singleCategory.photo,\n    width: \"150\"\n  }, null, 8, _hoisted_21)])) : _createCommentVNode(\"\", true), $data.spinner ? (_openBlock(), _createBlock(_component_spinner, {\n    key: 4\n  })) : _createCommentVNode(\"\", true)]);\n}","map":{"version":3,"names":["class","_createElementVNode","type","_createElementBlock","_hoisted_1","_hoisted_2","onSubmit","_cache","_withModifiers","args","$options","createCategory","enctype","$data","newCategory","$event","placeholder","required","onChange","handleFileChange","_hoisted_3","_hoisted_4","_hoisted_5","categories","length","_hoisted_6","_Fragment","_renderList","cat","key","_id","_hoisted_7","_toDisplayString","photo","src","width","_hoisted_9","onClick","getCategory","_hoisted_10","editCategory","_hoisted_11","deleteCategory","_hoisted_12","_hoisted_13","_hoisted_14","editingCategory","_hoisted_15","_hoisted_16","updateCategory","handleEditFileChange","_hoisted_17","singleCategory","_hoisted_18","_hoisted_19","_hoisted_20","spinner","_createBlock","_component_spinner"],"sources":["C:\\Users\\ajib\\OneDrive\\Desktop\\event-ticket\\event-ticket-frontend\\src\\components\\app\\admin\\category.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <h1>Category Manager</h1>\r\n\r\n    <!-- Create Category Form -->\r\n    <form @submit.prevent=\"createCategory\" enctype=\"multipart/form-data\">\r\n      <input v-model=\"newCategory.type\" placeholder=\"Category Type\" required />\r\n      <input type=\"file\" @change=\"handleFileChange\" />\r\n      <button type=\"submit\">Create Category</button>\r\n    </form>\r\n\r\n    <hr />\r\n\r\n    <!-- List All Categories -->\r\n    <h2>All Categories</h2>\r\n    <div v-if=\"categories.length\">\r\n      <div v-for=\"cat in categories\" :key=\"cat._id\" class=\"category-box\">\r\n        <p><strong>Type:</strong> {{ cat.type }}</p>\r\n        <img v-if=\"cat.photo\" :src=\"cat.photo\" width=\"150\" />\r\n        <br />\r\n        <button @click=\"getCategory(cat._id)\">View</button>\r\n        <button @click=\"editCategory(cat)\">Edit</button>\r\n        <button @click=\"deleteCategory(cat._id)\">Delete</button>\r\n      </div>\r\n    </div>\r\n    <div v-else>No categories found.</div>\r\n\r\n    <hr />\r\n\r\n    <!-- Edit Category -->\r\n    <div v-if=\"editingCategory\">\r\n      <h2>Edit Category</h2>\r\n      <form @submit.prevent=\"updateCategory\" enctype=\"multipart/form-data\">\r\n        <input v-model=\"editingCategory.type\" placeholder=\"Category Type\" />\r\n        <input type=\"file\" @change=\"handleEditFileChange\" />\r\n        <button type=\"submit\">Update</button>\r\n        <button type=\"button\" @click=\"editingCategory = null\">Cancel</button>\r\n      </form>\r\n    </div>\r\n\r\n    <!-- View Single Category -->\r\n    <div v-if=\"singleCategory\">\r\n      <h2>Single Category</h2>\r\n      <p><strong>Type:</strong> {{ singleCategory.type }}</p>\r\n      <img :src=\"singleCategory.photo\" width=\"150\" />\r\n    </div>\r\n            <spinner v-if=\"spinner\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport spinner from \"../../spinner.vue\";\r\nimport axios from \"axios\";\r\n\r\n\r\nexport default {\r\n    components: {\r\n        spinner\r\n    },\r\n  data() {\r\n    return {\r\n      baseUrl: \"https://event-ticket-qa70.onrender.com/api\",\r\n      categories: [],\r\n      newCategory: { type: \"\", photo: null },\r\n      editingCategory: null,\r\n      spinner:false,\r\n      selectedFile: null,\r\n      editingFile: null,\r\n      singleCategory: null,\r\n    };\r\n  },\r\n  mounted() {\r\n  \r\n    this.fetchCategories();\r\n  },\r\n  methods: {\r\n    async fetchCategories() {\r\n      const res = await axios.get(`${this.baseUrl}/categories`);\r\n      this.categories = res.data.categories;\r\n    },\r\n    handleFileChange(e) {\r\n      this.selectedFile = e.target.files[0];\r\n    },\r\n    async createCategory() {\r\n         this.spinner = true\r\n      const formData = new FormData();\r\n      formData.append(\"type\", this.newCategory.type);\r\n      if (this.selectedFile) {\r\n        formData.append(\"photo\", this.selectedFile);\r\n      }\r\n\r\n      await axios.post(`${this.baseUrl}/categories`, formData, {\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n        },\r\n      });\r\n      \r\n      this.newCategory = { type: \"\", photo: null };\r\n      this.selectedFile = null;\r\n       this.spinner = false;\r\n      this.fetchCategories();\r\n\r\n    },\r\n    editCategory(cat) {\r\n      this.editingCategory = { ...cat };\r\n      this.editingFile = null;\r\n    },\r\n    handleEditFileChange(e) {\r\n      this.editingFile = e.target.files[0];\r\n    },\r\n    async updateCategory() {\r\n   \r\n      const formData = new FormData();\r\n      formData.append(\"type\", this.editingCategory.type);\r\n      if (this.editingFile) {\r\n        formData.append(\"photo\", this.editingFile);\r\n      }\r\n\r\n      await axios.put(\r\n        `${this.baseUrl}/categories/${this.editingCategory._id}`,\r\n        formData,\r\n        {\r\n          headers: {\r\n            \"Content-Type\": \"multipart/form-data\",\r\n          },\r\n        },\r\n        \r\n        alert('categories updated')\r\n      );\r\n\r\n      this.editingCategory = null;\r\n      this.editingFile = null;\r\n      this.fetchCategories();\r\n    },\r\n    async deleteCategory(id) {\r\n      \r\n      await axios.delete(`${this.baseUrl}/categories/${id}`);\r\n       alert('category deleted')\r\n      this.fetchCategories();\r\n    },\r\n    async getCategory(id) {\r\n      const res = await axios.get(`${this.baseUrl}/categories/${id}`);\r\n      this.singleCategory = res.data.category;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  padding: 20px;\r\n  font-family: Arial;\r\n}\r\n.category-box {\r\n  border: 1px solid #ccc;\r\n  padding: 10px;\r\n  margin-bottom: 10px;\r\n}\r\n</style>\r\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAW;gEACpBC,mBAAA,CAAyB,YAArB,kBAAgB;gEAMlBA,mBAAA,CAA8C;EAAtCC,IAAI,EAAC;AAAQ,GAAC,iBAAe;gEAGvCD,mBAAA,CAAM;gEAGNA,mBAAA,CAAuB,YAAnB,gBAAc;;;;gEAGXA,mBAAA,CAAsB,gBAAd,OAAK;;gEAEhBA,mBAAA,CAAM;;;;;;;iEAQVA,mBAAA,CAAM;;;;iEAIJA,mBAAA,CAAsB,YAAlB,eAAa;iEAIfA,mBAAA,CAAqC;EAA7BC,IAAI,EAAC;AAAQ,GAAC,QAAM;;;;iEAO9BD,mBAAA,CAAwB,YAApB,iBAAe;iEAChBA,mBAAA,CAAsB,gBAAd,OAAK;;;;uBA1CpBE,mBAAA,CA8CM,OA9CNC,UA8CM,GA7CJC,UAAyB,EAGzBJ,mBAAA,CAIO;IAJAK,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAUC,QAAA,CAAAC,cAAA,IAAAD,QAAA,CAAAC,cAAA,IAAAF,IAAA,CAAc;IAAEG,OAAO,EAAC;sBAC7CX,mBAAA,CAAyE;+DAAzDY,KAAA,CAAAC,WAAW,CAACZ,IAAI,GAAAa,MAAA;IAAEC,WAAW,EAAC,eAAe;IAACC,QAAQ,EAAR;gCAA9CJ,KAAA,CAAAC,WAAW,CAACZ,IAAI,E,GAChCD,mBAAA,CAAgD;IAAzCC,IAAI,EAAC,MAAM;IAAEgB,QAAM,EAAAX,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEC,QAAA,CAAAS,gBAAA,IAAAT,QAAA,CAAAS,gBAAA,IAAAV,IAAA,CAAgB;gBAC5CW,UAA8C,C,OAGhDC,UAAM,EAGNC,UAAuB,EACZT,KAAA,CAAAU,UAAU,CAACC,MAAM,I,cAA5BrB,mBAAA,CASM,OAAAsB,UAAA,I,kBARJtB,mBAAA,CAOMuB,SAAA,QAAAC,WAAA,CAPad,KAAA,CAAAU,UAAU,EAAjBK,GAAG;yBAAfzB,mBAAA,CAOM;MAP0B0B,GAAG,EAAED,GAAG,CAACE,GAAG;MAAE9B,KAAK,EAAC;QAClDC,mBAAA,CAA4C,YAAzC8B,UAAsB,E,iBAAA,GAAC,GAAAC,gBAAA,CAAGJ,GAAG,CAAC1B,IAAI,M,GAC1B0B,GAAG,CAACK,KAAK,I,cAApB9B,mBAAA,CAAqD;;MAA9B+B,GAAG,EAAEN,GAAG,CAACK,KAAK;MAAEE,KAAK,EAAC;8DAC7CC,UAAM,EACNnC,mBAAA,CAAmD;MAA1CoC,OAAK,EAAAtB,MAAA,IAAEL,QAAA,CAAA4B,WAAW,CAACV,GAAG,CAACE,GAAG;OAAG,MAAI,KAAAS,WAAA,GAC1CtC,mBAAA,CAAgD;MAAvCoC,OAAK,EAAAtB,MAAA,IAAEL,QAAA,CAAA8B,YAAY,CAACZ,GAAG;OAAG,MAAI,KAAAa,WAAA,GACvCxC,mBAAA,CAAwD;MAA/CoC,OAAK,EAAAtB,MAAA,IAAEL,QAAA,CAAAgC,cAAc,CAACd,GAAG,CAACE,GAAG;OAAG,QAAM,KAAAa,WAAA,E;gCAGnDxC,mBAAA,CAAsC,OAAAyC,WAAA,EAA1B,sBAAoB,IAEhCC,WAAM,EAGKhC,KAAA,CAAAiC,eAAe,I,cAA1B3C,mBAAA,CAQM,OAAA4C,WAAA,GAPJC,WAAsB,EACtB/C,mBAAA,CAKO;IALAK,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAUC,QAAA,CAAAuC,cAAA,IAAAvC,QAAA,CAAAuC,cAAA,IAAAxC,IAAA,CAAc;IAAEG,OAAO,EAAC;sBAC7CX,mBAAA,CAAoE;+DAApDY,KAAA,CAAAiC,eAAe,CAAC5C,IAAI,GAAAa,MAAA;IAAEC,WAAW,EAAC;gCAAlCH,KAAA,CAAAiC,eAAe,CAAC5C,IAAI,E,GACpCD,mBAAA,CAAoD;IAA7CC,IAAI,EAAC,MAAM;IAAEgB,QAAM,EAAAX,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEC,QAAA,CAAAwC,oBAAA,IAAAxC,QAAA,CAAAwC,oBAAA,IAAAzC,IAAA,CAAoB;gBAChD0C,WAAqC,EACrClD,mBAAA,CAAqE;IAA7DC,IAAI,EAAC,QAAQ;IAAEmC,OAAK,EAAA9B,MAAA,QAAAA,MAAA,MAAAQ,MAAA,IAAEF,KAAA,CAAAiC,eAAe;KAAS,QAAM,E,0CAKrDjC,KAAA,CAAAuC,cAAc,I,cAAzBjD,mBAAA,CAIM,OAAAkD,WAAA,GAHJC,WAAwB,EACxBrD,mBAAA,CAAuD,YAApDsD,WAAsB,E,iBAAA,GAAC,GAAAvB,gBAAA,CAAGnB,KAAA,CAAAuC,cAAc,CAAClD,IAAI,M,GAChDD,mBAAA,CAA+C;IAAzCiC,GAAG,EAAErB,KAAA,CAAAuC,cAAc,CAACnB,KAAK;IAAEE,KAAK,EAAC;+DAElBtB,KAAA,CAAA2C,OAAO,I,cAAtBC,YAAA,CAA0BC,kBAAA;IAAA7B,GAAA;EAAA,M"},"metadata":{},"sourceType":"module","externalDependencies":[]}