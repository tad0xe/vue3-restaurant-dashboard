{"ast":null,"code":"import axiosInstance from \"../../helpers/axiosInstance\";\nconst state = {\n  products: [],\n  product: [],\n  sortedProducts: [],\n  likedProducts: [],\n  highestSellingProduct: null\n};\nconst mutations = {\n  SET_HIGHEST_SELLING_PRODUCT(state, products) {\n    state.highestSellingProduct = products;\n  },\n  SET_PRODUCTS(state, products) {\n    state.products = products;\n  },\n  SET_PRODUCT(state, product) {\n    state.product = product;\n  },\n  SET_SORTED_PRODUCTS(state, sortedProducts) {\n    state.sortedProducts = sortedProducts;\n  },\n  SET_LIKED_PRODUCTS(state, likedProducts) {\n    state.likedProducts = likedProducts;\n  },\n  INCREMENT_LIKES(state) {\n    if (state.products) {\n      state.products.likes++;\n    }\n  }\n};\nconst actions = {\n  async createProduct({\n    commit\n  }, formData) {\n    try {\n      const response = await axiosInstance.post('/products', formData);\n      // Handle successful response if needed\n      return response.data;\n    } catch (error) {\n      // Handle error if needed\n      throw error;\n    }\n  },\n  fetchHighestSellingProducts({\n    commit\n  }) {\n    return axiosInstance.get('/highest-selling-product').then(response => {\n      const products = response.data.highestSellingProducts;\n      commit('SET_HIGHEST_SELLING_PRODUCT', products);\n    }).catch(error => {\n      console.error(error);\n    });\n  },\n  fetchProducts({\n    commit\n  }) {\n    return axiosInstance.get('/products').then(response => {\n      commit('SET_PRODUCTS', response.data.products);\n    }).catch(error => {\n      console.error(error);\n    });\n  },\n  fetchSortedProducts({\n    commit\n  }) {\n    return axiosInstance.get(\"/products\").then(response => {\n      const products = response.data.products;\n      const sortedProducts = products.sort((a, b) => b.views - a.views);\n      commit(\"SET_SORTED_PRODUCTS\", sortedProducts);\n    }).catch(error => {\n      console.log(error);\n    });\n  },\n  fetchLikedProducts({\n    commit\n  }) {\n    return axiosInstance.get(\"/products\").then(response => {\n      const products = response.data.products;\n      const likedProducts = products.sort((a, b) => b.likes - a.likes);\n      commit(\"SET_LIKED_PRODUCTS\", likedProducts);\n    }).catch(error => {\n      console.log(error);\n    });\n  },\n  likeProducts({\n    commit\n  }, productId) {\n    return axiosInstance.post(`/products/${productId}/like`).then(response => {\n      //    console.log(response)\n      commit('INCREMENT_LIKES');\n      const products = response.data.likes;\n      // Handle the response if needed\n    }).catch(error => {\n      console.error(error);\n    });\n  },\n  incrementViews({\n    commit\n  }, productId) {\n    return axiosInstance.post(`/products/${productId}/views`).then(response => {\n      // Handle the response if needed\n    }).catch(error => {\n      console.error(error);\n    });\n  },\n  fetchProduct({\n    commit\n  }, productId) {\n    return axiosInstance.get(`/products/${productId}`).then(response => {\n      commit(\"SET_PRODUCT\", response.data.product);\n      history.replaceState({}, \"\", response.data.product.title.replaceAll(\" \", \"-\"));\n    }).catch(error => {\n      console.error(error);\n    });\n  }\n};\nconst getters = {\n  totalPercentage(state) {\n    const totalProducts = state.products.length;\n    // console.log(state.products.products.length)\n    return totalProducts / 100;\n    //return ((totalProducts / 100) ).toFixed(0);\n  },\n\n  getHighestSellingProducts(state) {\n    return state.highestSellingProduct;\n  },\n  getProduct(state) {\n    return state.product;\n  },\n  getProducts(state) {\n    return state.products;\n  },\n  getSortedProducts(state) {\n    return state.sortedProducts;\n  },\n  getLikedProducts(state) {\n    return state.likedProducts;\n  },\n  sortedProductsWithHighestSelling(state, getters) {\n    const sortedProducts = getters.getSortedProducts;\n    const highestSellingProducts = getters.getHighestSellingProducts;\n\n    // Merge the sorted products and highest-selling products\n    const mergedProducts = sortedProducts.map(product => {\n      const highestSellingProduct = highestSellingProducts.find(item => item.productID === product._id);\n      return {\n        ...product,\n        sales: highestSellingProduct ? highestSellingProduct.sales : 0\n      };\n    });\n    return mergedProducts;\n  }\n};\nexport default {\n  state,\n  mutations,\n  actions,\n  getters\n};","map":{"version":3,"names":["axiosInstance","state","products","product","sortedProducts","likedProducts","highestSellingProduct","mutations","SET_HIGHEST_SELLING_PRODUCT","SET_PRODUCTS","SET_PRODUCT","SET_SORTED_PRODUCTS","SET_LIKED_PRODUCTS","INCREMENT_LIKES","likes","actions","createProduct","commit","formData","response","post","data","error","fetchHighestSellingProducts","get","then","highestSellingProducts","catch","console","fetchProducts","fetchSortedProducts","sort","a","b","views","log","fetchLikedProducts","likeProducts","productId","incrementViews","fetchProduct","history","replaceState","title","replaceAll","getters","totalPercentage","totalProducts","length","getHighestSellingProducts","getProduct","getProducts","getSortedProducts","getLikedProducts","sortedProductsWithHighestSelling","mergedProducts","map","find","item","productID","_id","sales"],"sources":["C:/Users/ajib/OneDrive/Desktop/event-ticket/event-ticket-frontend/src/store/modules/products.js"],"sourcesContent":["import axiosInstance from \"../../helpers/axiosInstance\";\r\nconst state = {\r\n    products: [],\r\n    product: [],\r\n    sortedProducts: [],\r\n    likedProducts: [],\r\n    highestSellingProduct: null,\r\n\r\n\r\n};\r\nconst mutations = {\r\n    SET_HIGHEST_SELLING_PRODUCT(state, products) {\r\n        state.highestSellingProduct = products;\r\n    },\r\n    SET_PRODUCTS(state, products) {\r\n        state.products = products;\r\n    },\r\n    SET_PRODUCT(state, product) {\r\n        state.product = product;\r\n    },\r\n    SET_SORTED_PRODUCTS(state, sortedProducts) {\r\n        state.sortedProducts = sortedProducts;\r\n    },\r\n    SET_LIKED_PRODUCTS(state, likedProducts) {\r\n        state.likedProducts = likedProducts;\r\n    },\r\n    INCREMENT_LIKES(state) {\r\n        if (state.products) {\r\n            state.products.likes++;\r\n        }\r\n    },\r\n\r\n};\r\nconst actions = {\r\n    async createProduct({ commit }, formData) {\r\n        try {\r\n          const response = await axiosInstance.post('/products', formData);\r\n          // Handle successful response if needed\r\n          return response.data;\r\n        } catch (error) {\r\n          // Handle error if needed\r\n          throw error;\r\n        }\r\n      },\r\n    fetchHighestSellingProducts({\r\n        commit\r\n    }) {\r\n        return axiosInstance\r\n            .get('/highest-selling-product')\r\n            .then((response) => {\r\n                const products = response.data.highestSellingProducts;\r\n                commit('SET_HIGHEST_SELLING_PRODUCT', products);\r\n            })\r\n            .catch((error) => {\r\n                console.error(error);\r\n            });\r\n    },\r\n\r\n    fetchProducts({\r\n        commit\r\n    }) {\r\n        return axiosInstance\r\n            .get('/products')\r\n            .then((response) => {\r\n                commit('SET_PRODUCTS', response.data.products);\r\n\r\n            })\r\n            .catch((error) => {\r\n                console.error(error);\r\n            });\r\n    },\r\n    fetchSortedProducts({\r\n        commit\r\n    }) {\r\n        return axiosInstance\r\n            .get(\"/products\")\r\n            .then((response) => {\r\n                const products = response.data.products;\r\n                const sortedProducts = products.sort((a, b) => b.views - a.views);\r\n\r\n                commit(\"SET_SORTED_PRODUCTS\", sortedProducts);\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n            });\r\n    },\r\n    fetchLikedProducts({\r\n        commit\r\n    }) {\r\n        return axiosInstance\r\n            .get(\"/products\")\r\n            .then((response) => {\r\n                const products = response.data.products;\r\n                const likedProducts = products.sort((a, b) => b.likes - a.likes);\r\n\r\n                commit(\"SET_LIKED_PRODUCTS\", likedProducts);\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n            });\r\n    },\r\n\r\n\r\n    likeProducts({\r\n        commit\r\n    }, productId) {\r\n        return axiosInstance\r\n            .post(`/products/${productId}/like`)\r\n            .then(response => {\r\n            //    console.log(response)\r\n               commit('INCREMENT_LIKES');\r\n               const products = response.data.likes;\r\n                // Handle the response if needed\r\n            })\r\n            .catch(error => {\r\n                console.error(error);\r\n            });\r\n    },\r\n\r\n    incrementViews({\r\n        commit\r\n    }, productId) {\r\n        return axiosInstance\r\n            .post(`/products/${productId}/views`)\r\n            .then(response => {\r\n                // Handle the response if needed\r\n            })\r\n            .catch(error => {\r\n                console.error(error);\r\n            });\r\n    },\r\n    fetchProduct({\r\n        commit\r\n    }, productId) {\r\n        return axiosInstance\r\n            .get(`/products/${productId}`)\r\n            .then(response => {\r\n                commit(\"SET_PRODUCT\", response.data.product);\r\n                history.replaceState({}, \"\", response.data.product.title.replaceAll(\" \", \"-\"));\r\n\r\n            })\r\n            .catch(error => {\r\n                console.error(error);\r\n            });\r\n    }\r\n};\r\nconst getters = {\r\n    totalPercentage(state) {\r\n        const totalProducts = state.products.length;\r\n        // console.log(state.products.products.length)\r\n        return ((totalProducts / 100));\r\n        //return ((totalProducts / 100) ).toFixed(0);\r\n    },\r\n    getHighestSellingProducts(state) {\r\n        return state.highestSellingProduct;\r\n    },\r\n    getProduct(state) {\r\n        return state.product;\r\n    },\r\n\r\n    getProducts(state) {\r\n        return state.products;\r\n    },\r\n    getSortedProducts(state) {\r\n        return state.sortedProducts;\r\n    },\r\n    getLikedProducts(state) {\r\n        return state.likedProducts;\r\n    },\r\n    sortedProductsWithHighestSelling(state, getters) {\r\n        const sortedProducts = getters.getSortedProducts;\r\n        const highestSellingProducts = getters.getHighestSellingProducts;\r\n\r\n        // Merge the sorted products and highest-selling products\r\n        const mergedProducts = sortedProducts.map((product) => {\r\n          const highestSellingProduct = highestSellingProducts.find(\r\n            (item) => item.productID === product._id\r\n          );\r\n\r\n          return {\r\n            ...product,\r\n            sales: highestSellingProduct ? highestSellingProduct.sales : 0\r\n          };\r\n        });\r\n\r\n        return mergedProducts;\r\n      }\r\n\r\n\r\n};\r\n\r\n\r\n\r\nexport default {\r\n\r\n    state,\r\n    mutations,\r\n    actions,\r\n    getters\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}