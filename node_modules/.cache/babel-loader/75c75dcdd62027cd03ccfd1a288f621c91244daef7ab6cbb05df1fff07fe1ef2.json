{"ast":null,"code":"import { ref } from 'vue';\nimport axios from 'axios';\nimport isAdmin from \"@/helpers/isAdmin.js\";\nexport default {\n  __name: 'rex',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const product = ref({\n      title: '',\n      brand: '',\n      description: '',\n      availability: '',\n      price: null,\n      stockQuantity: null\n    });\n    const files = ref([]);\n    const uploadMsg = ref('');\n    const handleFileChange = event => {\n      files.value = Array.from(event.target.files);\n    };\n    const submitProduct = async () => {\n      const formData = new FormData();\n\n      // Append all form fields\n      for (const key in product.value) {\n        formData.append(key, product.value[key]);\n      }\n\n      // Append each photo file\n      files.value.forEach(file => {\n        formData.append('photos', file); // must match 'photos' in upload.array(\"photos\", 10)\n      });\n\n      try {\n        const response = await axios.post('http://localhost:4000/api/products', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data',\n            Authorization: `Bearer ${isAdmin()}` // Replace with actual token\n          }\n        });\n\n        uploadMsg.value = response.data.msg;\n      } catch (error) {\n        console.error(error);\n        uploadMsg.value = 'Upload failed.';\n      }\n    };\n    const __returned__ = {\n      product,\n      files,\n      uploadMsg,\n      handleFileChange,\n      submitProduct,\n      ref,\n      get axios() {\n        return axios;\n      },\n      get isAdmin() {\n        return isAdmin;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","axios","isAdmin","product","title","brand","description","availability","price","stockQuantity","files","uploadMsg","handleFileChange","event","value","Array","from","target","submitProduct","formData","FormData","key","append","forEach","file","response","post","headers","Authorization","data","msg","error","console"],"sources":["C:/Users/ajib/OneDrive/Desktop/event-ticket/event-ticket-frontend/src/components/rex.vue"],"sourcesContent":["<template>\r\n  <div class=\"container mt-5\">\r\n    <form @submit.prevent=\"submitProduct\" enctype=\"multipart/form-data\">\r\n      <div class=\"mb-3\">\r\n        <label class=\"form-label\">Title</label>\r\n        <input v-model=\"product.title\" type=\"text\" class=\"form-control\" required />\r\n      </div>\r\n\r\n      <div class=\"mb-3\">\r\n        <label class=\"form-label\">Brand</label>\r\n        <input v-model=\"product.brand\" type=\"text\" class=\"form-control\" required />\r\n      </div>\r\n\r\n      <div class=\"mb-3\">\r\n        <label class=\"form-label\">Description</label>\r\n        <textarea v-model=\"product.description\" class=\"form-control\" required></textarea>\r\n      </div>\r\n\r\n      <div class=\"mb-3\">\r\n        <label class=\"form-label\">Availability</label>\r\n        <input v-model=\"product.availability\" type=\"text\" class=\"form-control\" />\r\n      </div>\r\n\r\n      <div class=\"mb-3\">\r\n        <label class=\"form-label\">Price</label>\r\n        <input v-model.number=\"product.price\" type=\"number\" class=\"form-control\" />\r\n      </div>\r\n\r\n      <div class=\"mb-3\">\r\n        <label class=\"form-label\">Stock Quantity</label>\r\n        <input v-model.number=\"product.stockQuantity\" type=\"number\" class=\"form-control\" />\r\n      </div>\r\n\r\n      <div class=\"mb-3\">\r\n        <label class=\"form-label\">Photos</label>\r\n        <input @change=\"handleFileChange\" type=\"file\" multiple class=\"form-control\" />\r\n      </div>\r\n\r\n      <button type=\"submit\" class=\"btn btn-primary\">Submit Product</button>\r\n    </form>\r\n\r\n    <div v-if=\"uploadMsg\" class=\"alert alert-info mt-3\">\r\n      {{ uploadMsg }}\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport axios from 'axios'\r\nimport isAdmin from \"@/helpers/isAdmin.js\";\r\n\r\n\r\nconst product = ref({\r\n  title: '',\r\n  brand: '',\r\n  description: '',\r\n  availability: '',\r\n  price: null,\r\n  stockQuantity: null\r\n})\r\n\r\nconst files = ref([])\r\nconst uploadMsg = ref('')\r\n\r\nconst handleFileChange = (event) => {\r\n  files.value = Array.from(event.target.files)\r\n}\r\n\r\nconst submitProduct = async () => {\r\n  const formData = new FormData()\r\n\r\n  // Append all form fields\r\n  for (const key in product.value) {\r\n    formData.append(key, product.value[key])\r\n  }\r\n\r\n  // Append each photo file\r\n  files.value.forEach(file => {\r\n    formData.append('photos', file) // must match 'photos' in upload.array(\"photos\", 10)\r\n  })\r\n\r\n  try {\r\n    const response = await axios.post('http://localhost:4000/api/products', formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data',\r\n         Authorization: `Bearer ${isAdmin()}` // Replace with actual token\r\n      }\r\n    })\r\n\r\n    uploadMsg.value = response.data.msg\r\n  } catch (error) {\r\n    console.error(error)\r\n    uploadMsg.value = 'Upload failed.'\r\n  }\r\n}\r\n</script>\r\n"],"mappings":"AAgDA,SAASA,GAAG,QAAQ,KAAK;AACzB,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,OAAO,MAAM,sBAAsB;;;;;;;IAG1C,MAAMC,OAAO,GAAGH,GAAG,CAAC;MAClBI,KAAK,EAAE,EAAE;MACTC,KAAK,EAAE,EAAE;MACTC,WAAW,EAAE,EAAE;MACfC,YAAY,EAAE,EAAE;MAChBC,KAAK,EAAE,IAAI;MACXC,aAAa,EAAE;IACjB,CAAC,CAAC;IAEF,MAAMC,KAAK,GAAGV,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMW,SAAS,GAAGX,GAAG,CAAC,EAAE,CAAC;IAEzB,MAAMY,gBAAgB,GAAIC,KAAK,IAAK;MAClCH,KAAK,CAACI,KAAK,GAAGC,KAAK,CAACC,IAAI,CAACH,KAAK,CAACI,MAAM,CAACP,KAAK,CAAC;IAC9C,CAAC;IAED,MAAMQ,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChC,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;;MAE/B;MACA,KAAK,MAAMC,GAAG,IAAIlB,OAAO,CAACW,KAAK,EAAE;QAC/BK,QAAQ,CAACG,MAAM,CAACD,GAAG,EAAElB,OAAO,CAACW,KAAK,CAACO,GAAG,CAAC,CAAC;MAC1C;;MAEA;MACAX,KAAK,CAACI,KAAK,CAACS,OAAO,CAACC,IAAI,IAAI;QAC1BL,QAAQ,CAACG,MAAM,CAAC,QAAQ,EAAEE,IAAI,CAAC,EAAC;MAClC,CAAC,CAAC;;MAEF,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMxB,KAAK,CAACyB,IAAI,CAAC,oCAAoC,EAAEP,QAAQ,EAAE;UAChFQ,OAAO,EAAE;YACP,cAAc,EAAE,qBAAqB;YACpCC,aAAa,EAAG,UAAS1B,OAAO,CAAC,CAAE,EAAC,CAAC;UACxC;QACF,CAAC,CAAC;;QAEFS,SAAS,CAACG,KAAK,GAAGW,QAAQ,CAACI,IAAI,CAACC,GAAG;MACrC,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;QACpBpB,SAAS,CAACG,KAAK,GAAG,gBAAgB;MACpC;IACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}